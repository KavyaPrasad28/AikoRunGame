{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kavya\\\\source\\\\repos\\\\AikoGame\\\\aiko-runner\\\\src\\\\components\\\\AikoRunner.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useCallback } from 'react';\nimport { Howl } from 'howler';\nimport './AikoRunner.css';\n\n// Fix sound path (no leading slash if in public/sounds)\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst jumpSound = new Howl({\n  src: ['sounds/jump.mp3']\n});\nconst AikoRunner = ({\n  setY,\n  setX,\n  gameOver\n}) => {\n  _s();\n  // Add gameOver prop\n  const [frame, setFrame] = useState(0);\n  const [yPos, setYPos] = useState(20); // bottom position in px\n  const [velocity, setVelocity] = useState(0);\n  const [jumpCount, setJumpCount] = useState(0); // State for double jump\n  const [left, setLeft] = useState(50); // horizontal position\n\n  // --- FIX: Sprite sheet details updated for smaller size ---\n  const totalFrames = 10;\n  const columns = 5;\n  const frameWidth = 140; // 50% of 280\n  const frameHeight = 193; // 50% of 385\n\n  // --- FIX: Adjusted jump physics for a higher, longer jump ---\n  const gravity = 0.7;\n  const jumpStrength = 23;\n\n  // Animate running frames and horizontal movement\n  useEffect(() => {\n    if (gameOver) return; // Stop running when game is over\n\n    const interval = setInterval(() => {\n      setFrame(prev => (prev + 1) % totalFrames);\n      setLeft(prev => {\n        const newLeft = prev + 10;\n        if (newLeft + frameWidth > window.innerWidth) {\n          if (setX) setX(50);\n          return 50;\n        }\n        if (setX) setX(newLeft);\n        return newLeft;\n      });\n    }, 80);\n    return () => clearInterval(interval);\n  }, [setX, gameOver]); // Rerun if gameOver status changes\n\n  // Handle jump physics\n  useEffect(() => {\n    if (gameOver) return; // Stop physics when game is over\n\n    let animation;\n    const loop = () => {\n      setYPos(prevY => {\n        let newY = prevY + velocity;\n        if (newY <= 20) {\n          // landed\n          newY = 20;\n          setJumpCount(0); // RESET jump count on landing\n          setVelocity(0);\n        } else {\n          setVelocity(v => v - gravity);\n        }\n        if (setY) setY(newY);\n        return newY;\n      });\n      animation = requestAnimationFrame(loop);\n    };\n    animation = requestAnimationFrame(loop);\n    return () => cancelAnimationFrame(animation);\n  }, [velocity, setY, gravity, gameOver]); // Rerun if gameOver status changes\n\n  // --- FIX: Keyboard and Click jump listener ---\n  useEffect(() => {\n    const handleJump = () => {\n      // Use the functional form of setState to get the latest jumpCount\n      setJumpCount(currentJumpCount => {\n        if (currentJumpCount < 2 && !gameOver) {\n          setVelocity(jumpStrength);\n          jumpSound.play();\n          return currentJumpCount + 1; // Return the new jump count\n        }\n        return currentJumpCount; // Otherwise, keep it the same\n      });\n    };\n    const onKeyDown = e => {\n      if (e.code === 'Space' || e.code === 'ArrowUp') {\n        handleJump();\n      }\n    };\n    window.addEventListener('keydown', onKeyDown);\n    // Also add a click listener to the whole window for mobile/mouse users\n    window.addEventListener('click', handleJump);\n    return () => {\n      window.removeEventListener('keydown', onKeyDown);\n      window.removeEventListener('click', handleJump);\n    };\n  }, [gameOver, jumpStrength]); // Re-run only if gameOver or jumpStrength changes\n\n  // Calculate sprite sheet position\n  const col = frame % columns;\n  const row = Math.floor(frame / columns);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"aiko-runner\",\n    style: {\n      backgroundPosition: `-${col * frameWidth}px -${row * frameHeight}px`,\n      bottom: `${yPos}px`,\n      left: `${left}px`\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 5\n  }, this);\n};\n_s(AikoRunner, \"C9tX5bFE4wi1a8NdPssdTbqYBUw=\");\n_c = AikoRunner;\nexport default AikoRunner;\nvar _c;\n$RefreshReg$(_c, \"AikoRunner\");","map":{"version":3,"names":["React","useEffect","useState","useCallback","Howl","jsxDEV","_jsxDEV","jumpSound","src","AikoRunner","setY","setX","gameOver","_s","frame","setFrame","yPos","setYPos","velocity","setVelocity","jumpCount","setJumpCount","left","setLeft","totalFrames","columns","frameWidth","frameHeight","gravity","jumpStrength","interval","setInterval","prev","newLeft","window","innerWidth","clearInterval","animation","loop","prevY","newY","v","requestAnimationFrame","cancelAnimationFrame","handleJump","currentJumpCount","play","onKeyDown","e","code","addEventListener","removeEventListener","col","row","Math","floor","className","style","backgroundPosition","bottom","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/kavya/source/repos/AikoGame/aiko-runner/src/components/AikoRunner.js"],"sourcesContent":["import React, { useEffect, useState, useCallback } from 'react';\r\nimport { Howl } from 'howler';\r\nimport './AikoRunner.css';\r\n\r\n// Fix sound path (no leading slash if in public/sounds)\r\nconst jumpSound = new Howl({ src: ['sounds/jump.mp3'] });\r\n\r\nconst AikoRunner = ({ setY, setX, gameOver }) => { // Add gameOver prop\r\n  const [frame, setFrame] = useState(0);\r\n  const [yPos, setYPos] = useState(20); // bottom position in px\r\n  const [velocity, setVelocity] = useState(0);\r\n  const [jumpCount, setJumpCount] = useState(0); // State for double jump\r\n  const [left, setLeft] = useState(50); // horizontal position\r\n\r\n  // --- FIX: Sprite sheet details updated for smaller size ---\r\n  const totalFrames = 10;\r\n  const columns = 5;\r\n  const frameWidth = 140;  // 50% of 280\r\n  const frameHeight = 193; // 50% of 385\r\n\r\n  // --- FIX: Adjusted jump physics for a higher, longer jump ---\r\n  const gravity = 0.7;\r\n  const jumpStrength = 23;\r\n\r\n  // Animate running frames and horizontal movement\r\n  useEffect(() => {\r\n    if (gameOver) return; // Stop running when game is over\r\n\r\n    const interval = setInterval(() => {\r\n      setFrame(prev => (prev + 1) % totalFrames);\r\n      setLeft(prev => {\r\n        const newLeft = prev + 10;\r\n        if (newLeft + frameWidth > window.innerWidth) {\r\n          if (setX) setX(50);\r\n          return 50;\r\n        }\r\n        if (setX) setX(newLeft);\r\n        return newLeft;\r\n      });\r\n    }, 80);\r\n    return () => clearInterval(interval);\r\n  }, [setX, gameOver]); // Rerun if gameOver status changes\r\n\r\n  // Handle jump physics\r\n  useEffect(() => {\r\n    if (gameOver) return; // Stop physics when game is over\r\n\r\n    let animation;\r\n    const loop = () => {\r\n      setYPos(prevY => {\r\n        let newY = prevY + velocity;\r\n        if (newY <= 20) { // landed\r\n          newY = 20;\r\n          setJumpCount(0); // RESET jump count on landing\r\n          setVelocity(0);\r\n        } else {\r\n          setVelocity(v => v - gravity);\r\n        }\r\n        if (setY) setY(newY);\r\n        return newY;\r\n      });\r\n      animation = requestAnimationFrame(loop);\r\n    };\r\n    animation = requestAnimationFrame(loop);\r\n    return () => cancelAnimationFrame(animation);\r\n  }, [velocity, setY, gravity, gameOver]); // Rerun if gameOver status changes\r\n\r\n  // --- FIX: Keyboard and Click jump listener ---\r\n  useEffect(() => {\r\n    const handleJump = () => {\r\n      // Use the functional form of setState to get the latest jumpCount\r\n      setJumpCount(currentJumpCount => {\r\n        if (currentJumpCount < 2 && !gameOver) {\r\n          setVelocity(jumpStrength);\r\n          jumpSound.play();\r\n          return currentJumpCount + 1; // Return the new jump count\r\n        }\r\n        return currentJumpCount; // Otherwise, keep it the same\r\n      });\r\n    };\r\n\r\n    const onKeyDown = (e) => {\r\n      if (e.code === 'Space' || e.code === 'ArrowUp') {\r\n        handleJump();\r\n      }\r\n    };\r\n\r\n    window.addEventListener('keydown', onKeyDown);\r\n    // Also add a click listener to the whole window for mobile/mouse users\r\n    window.addEventListener('click', handleJump);\r\n\r\n    return () => {\r\n      window.removeEventListener('keydown', onKeyDown);\r\n      window.removeEventListener('click', handleJump);\r\n    };\r\n  }, [gameOver, jumpStrength]); // Re-run only if gameOver or jumpStrength changes\r\n\r\n  // Calculate sprite sheet position\r\n  const col = frame % columns;\r\n  const row = Math.floor(frame / columns);\r\n\r\n  return (\r\n    <div\r\n      className=\"aiko-runner\"\r\n      style={{\r\n        backgroundPosition: `-${col * frameWidth}px -${row * frameHeight}px`,\r\n        bottom: `${yPos}px`,\r\n        left: `${left}px`\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default AikoRunner;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}